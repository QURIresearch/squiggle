This is a source code for https://squigglehub.org/.

# Deployment

## Database migrations

Database migrations are created with a usual [Prisma](https://www.prisma.io/) workflow.

We don't have CI/CD for migrating the database in production yet.

To deploy a migration to the production database:

- obtain the database connection string from Digital Ocean;
- run `DATABASE_URL=... prisma migrate deploy` locally.

## Changing the database

1. Edit `schema.prisma`
2. Run ``pnpm prisma migrate dev --name [migration-name-here]

## Notes on changing the schema

1. Edit `schema.prisma`, and edit the query/mutations functions.
2. Ensure the type has been added in `builder.prismaNode("NameHere", {...types` somewhere that gets read, somewhere in `/graphql/types`.
3. `schema.graphql` is autogenerated. Do not change it manually.
4. The Typescript language server will frequently get out of date when editing the schema. You can update use VS Code (control-shift-p) to force a restart. You might want to update the Prisma language server too. You can also just try to get everything right, run `pnpm run gen`, and reload files, sometimes that fixes things.

# Development notes

[How to load GraphQL data in Next.js pages](/docs/relay-pages.md)
