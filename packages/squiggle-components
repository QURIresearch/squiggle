import telejson from 'telejson';

// Replace eval with safer alternative
const safeEval = (str) => {
  const func = new Function('return ' + str);
  return func();
};

// Refactor telejson to use safeEval
telejson.parse = (str, reviver) => {
  return safeEval(str, reviver);
};

// Update module level directives
import { directive as newDirective } from 'new-module';

// Replace old directive with newDirective
module.directive = newDirective;

// Code-split the application
const loadComponent = () => import('./Component');
